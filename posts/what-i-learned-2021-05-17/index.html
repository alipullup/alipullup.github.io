<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>What I Learned 2021-05-17 - Ali&#39;s Posts</title>

<meta name="keywords" content="what-i-learned" />
<meta name="description" content="Another way of saying &ldquo;real time system&rdquo;, is to state that the &ldquo;tempo&rdquo; (time) is a critical factor. Summary of the paper Communication Breakdown: Analyzing CPU Usage in Commercial Web Workloads from 2004.  Static vs. dynamic web loads use CPU differently (duh!) Depending on workload, scheduling overhead (if many threads are spawned for short lived clients), networking overhead (TCP/IP and driver) dominate. For longer lived connections, the scheduling overhead is no longer the bottleneck, instead it&rsquo;s the web server.">
<meta name="author" content="">
<link rel="canonical" href="https://alipullup.github.io/posts/what-i-learned-2021-05-17/" />
<link href="https://alipullup.github.io/assets/css/stylesheet.min.fbd06d2c077ce980d90f87ea03ecde24ccdaf367319e63b97387bac5a9bcf698.css" integrity="sha256-&#43;9BtLAd86YDZD4fqA&#43;zeJMza82cxnmO5c4e6xam89pg=" rel="preload stylesheet"
    as="style">

<link rel="manifest" href="https://alipullup.github.io/site.webmanifest">
<link rel="icon" href="https://alipullup.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://alipullup.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://alipullup.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://alipullup.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://alipullup.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.78.1" />




</head>

<body class="single" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://alipullup.github.io/" accesskey="h">Ali&#39;s Posts</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()"></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      What I Learned 2021-05-17
    </h1>
    <div class="post-meta">May 17, 2021

    </div>
  </header> 

  <div class="post-content">
<ul>
<li>Another way of saying &ldquo;real time system&rdquo;, is to state that the &ldquo;tempo&rdquo; (time) is a critical factor.</li>
<li>Summary of the paper <a href="https://users.cs.duke.edu/~alvy/papers/ispass04.pdf">Communication Breakdown: Analyzing CPU Usage in Commercial Web Workloads</a> from 2004.
<ul>
<li>Static vs. dynamic web loads use CPU differently (duh!)</li>
<li>Depending on workload, scheduling overhead (if many threads are spawned for short lived clients), networking overhead (TCP/IP and driver) dominate.</li>
<li>For longer lived connections, the scheduling overhead is no longer the bottleneck, instead it&rsquo;s the web server.</li>
<li>For dynamic content, the bottleneck is the application server.</li>
</ul>
</li>
<li>From the paper <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/ms_tr_99_100_rules_of_thumb_in_data_engineering.pdf">Rules of Thumb in Data Engineering</a> from 1999
<ul>
<li>&ldquo;A system needs 8 MIPS/MBpsIO, but the instruction rate and IO rate must be measured on the relevant workload&rdquo;</li>
<li>Let&rsquo;s assume a CPI of 3, then</li>
</ul>
</li>
<li>From <a href="https://openvpn.net/vpn-server-resources/openvpn-access-server-system-requirements/">OpenVPN Access Server system requirements</a>
<ul>
<li>&ldquo;on a modern CPU with an AES-NI chipset you need approximately 12MHz for each megabit per second (Mbps) transferred in one direction&rdquo;</li>
<li>&ldquo;a modern 4-core system at 3GHz would count as 12,000MHz, which equates to approximately 1,000Mbps maximum throughput&rdquo;</li>
</ul>
</li>
<li>From the <a href="https://docs.netgate.com/pfsense/en/latest/hardware/size.html">Netgate Hardware Sizing Guide</a>
<ul>
<li>ARM Cortex A53, 1.2 GHz (2), TCP 656 Mbit/s, IMIX 190 Mbit/s</li>
<li>ARMv7 Cortex-A9, 1.6 GHz (2), TCP 2.44 Gbit/s, IMIX 1.04 Gbit/s,</li>
<li>Intel Atom C3558, 2.2 GHz (4), TCP 6.81 Gbit/s, IMIX 1.85 Gbit/s</li>
</ul>
</li>
<li>From Netgate Hardware Sizing Guide, throughput at 500 Kpps (no hardware model specified)
<ul>
<li>64 bytes: 244 Mbps</li>
<li>500 bytes: 1.87 Gbps</li>
<li>1000 bytes: 3.73 Gbps</li>
</ul>
</li>
<li>From the Netgate Hardware Sizing Guide, IPsec throughput by hardware model:
<ul>
<li>ARM Cortex A53, 1.2 GHz (2), IPSec: AES-128-CBC + SHA1, TCP 1460B: 74.2 Mbit/s, IMIX: 46 Mbit/s</li>
<li>ARMv7 Cortex-A9, 1.6 GHz (2), IPSec: AES-128-CBC + SHA1, TCP 1460B: 453 Mbit/s, IMIX: 108 Mbit/s</li>
<li>Intel Atom C3558, 2.2 GHz (4), IPSec: AES-128-GCM, TCP 1460B: 1.28 Gbit/s, IMIX: 385 Mbit/s</li>
</ul>
</li>
<li>The <a href="https://golang.org/pkg/html/template/">Go language template system</a> parses HTML, CSS, and 
automatically does <a href="https://rawgit.com/mikesamuel/sanitized-jquery-templates/trunk/safetemplate.html#problem_definition">proper escaping</a></li>
</ul>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://alipullup.github.io/tags/what-i-learned">what-i-learned</a></li>
    </ul>
  </footer>
</article>
    </main><footer class="footer">
    <span>This work is licensed under a Creative Commons Attribution 4.0 International License.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top" accesskey="g">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>


<script src="https://alipullup.github.io/assets/js/highlight.min.e7afc2928c0925d65c4732dfebe147014d91299a98e819e4b42f25c4fa68e91c.js" integrity="sha256-56/CkowJJdZcRzLf6&#43;FHAU2RKZqY6BnktC8lxPpo6Rw="></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            document.querySelector(`[id='${id}']`).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })
</script>

</body>

</html>
